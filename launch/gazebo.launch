<?xml version="1.0" encoding="UTF-8"?>

<launch>

<!--............................ CONFIGURABLE PARAMETERS .............................-->

<arg name="gazebo_gui_enabled" 		default="true"/>
<arg name="two_d_lidar_enabled"		default="false"/>
<arg name="camera_enabled"			default="false"/>
<arg name="wheel_odom_topic"		default="odom"/>
<arg name="publish_wheel_odom_tf"	default="true"/>
<arg name="conveyor_enabled"        default="false"/>
<arg name="ground_truth_frame"      default="map"/>

<!-- ............................... LAUNCH WORLD ................................... -->

<include file="$(find gazebo_ros)/launch/empty_world.launch">
  <arg name="paused"        value="false"/>
  <arg name="use_sim_time"  value="true"/>
  <arg name="gui"           value="$(arg gazebo_gui_enabled)"/>
  <arg name="headless"      value="true"/>
  <arg name="debug"         value="false"/>
</include>


<!-- ................................ XACRO CALL .................................... -->

<param name="robot_description" command="$(find xacro)/xacro $(find new_bcr_robot)/urdf/new_bcr_robot.xacro
	    two_d_lidar_enabled:=$(arg two_d_lidar_enabled)
	    camera_enabled:=$(arg camera_enabled)
		wheel_odom_topic:=$(arg wheel_odom_topic)
		publish_wheel_odom_tf:=$(arg publish_wheel_odom_tf)
		conveyor_enabled:=$(arg conveyor_enabled)
		ground_truth_frame:=$(arg ground_truth_frame)
		" />

<!-- ................................ SPAWN MODEL .................................... -->


<node name="spawn_model" pkg="gazebo_ros" type="spawn_model"
	args="-param robot_description
				-urdf
				-model new_bcr_robot
				-z 0.9"
	output="screen" />

<node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher">
	<!-- <remap from="/joint_states" to="/new_bcr_robot/joint_states"/> -->
</node>

</launch>